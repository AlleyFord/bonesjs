(()=>{"use strict";const t=class{name="";defaults={};opts={};apply(t){this.opts={...this.defaults,...t}}init(){}enable(t){}};class e{set(t){window.history.replaceState({},"",t)}}class s{qs={};constructor(t){this.parse(t)}parse(t){void 0===t&&(t=window.location.search),this.qs=new URLSearchParams(t)}get(t){return t?this.qs.get(t):this.qs}getAll(t){return t?this.qs.getAll(t):this.qs}}const r=class{URI;queryString;constructor(){this.URI=new e,this.queryString=new s}},i=class extends t{DURATION_DAY=86400;DURATION_WEEK=604800;DURATION_MONTH=18144e3;DURATION_YEAR=217728e3;name="Cookie";defaults={duration:this.DURATION_MONTH,strict:!0,domain:!1,path:"/",key:!1,value:!1};get(t){const e=document.cookie.match(new RegExp("[ ]?"+t+"=([^;]+)","i"));return e?decodeURIComponent(e[1]):null}set(t){this.apply(t);let e=[];if(!1===this.opts.key)return!1;if(!1!==this.opts.path&&e.push("path="+this.opts.path),!1!==this.opts.duration){let t=new Date;e.push("max-age="+this.opts.duration),e.push("expires="+t.setTime(t.getTime()+this.opts.duration))}!1!==this.opts.domain&&e.push("domain="+this.opts.domain),!0===e.strict&&e.push("SameSite=Strict");const s=this.opts.key+"="+encodeURIComponent(this.opts.value)+(e.length?";"+e.join(";"):"");return document.cookie=s,Bones.debug(this.name,s),!0}},n=new class extends t{name="EventHandler";#t={};#e=!1;setName(t){return this.#e=t,this}subscribe(t){return this.#t.hasOwnProperty(this.#e)?this.#t[this.#e].callbacks.push(t):this.#t[this.#e]={callbacks:[t]},this}publish(t){return this.#t.hasOwnProperty(this.#e)&&this.#t[this.#e].callbacks.forEach((e=>{e.call(t,t)})),this}},o=function(t){return n.setName(t)},a=class extends t{name="Format";currency(t){return parseFloat(String(t).replace(/[^\d\.]/g,"")).toFixed(2)}},h=class extends t{name="AJAX";enable(t){t.get=(...t)=>this.get(...t),t.post=(...t)=>this.post(...t),t.put=(...t)=>this.put(...t)}get(t,e){return this._request("get",t,e)}post(t,e){return this._request("post",t,e)}put(t,e){return this._request("put",t,e)}_request(t,e,s={}){t=t.toLowerCase();let r=null;const i={...s.headers||{}};return s.headers&&delete s.headers,"get"===t&&Object.keys(s).length&&(e+="?"+new URLSearchParams(s).toString()),["post","put"].includes(t)&&(r=s),fetch(e,{method:t,mode:"cors",cache:"no-cache",headers:i,redirect:"follow",body:r?JSON.stringify(r):null}).then((t=>{const e=t.headers.get("content-type");let s=!1;return s=!e||-1===e.indexOf("application/json")&&-1===e.indexOf("text/json")&&-1===e.indexOf("application/javascript")&&-1===e.indexOf("text/javascript")?t.text():t.json(),s}))}};class l{constructor(t){void 0!==t&&this._setNodes(this._flatten(document.querySelectorAll(t)),!0)}_clone(){let t=new l;return t._firstNodes=this._firstNodes,t._nodes=this._nodes,t}_isNodeList(t){return NodeList.prototype.isPrototypeOf(t)}_flatten(t){let e=[];return this._isNodeList(t)||Array.isArray(t)||(t=[t]),t.forEach((t=>{Array.isArray(t)?t.forEach((t=>{e.push(t)})):e.push(t)})),e}_apply(t){return this._nodes.forEach(((e,s)=>{t(e,s)}))}_returnStatic(t){let e=[];return this._nodes.forEach((s=>{e.push(t(s))})),1===e.length?e[0]:e}_setNodes(t,e=!1){this._nodes=t,e&&(this._firstNodes=this._nodes)}enter(t){return this.on("keyup",!1,(function(e){13===e.keyCode&&t.call(this,e)}))}on(t,e,s,r){"function"==typeof e&&(s=e,e=!1);let i={capture:!1,once:!1,passive:!1};return this._apply(((n,o)=>{let a=this._clone().eq(o);e?n.addEventListener(t,(t=>{t.target.matches(e)&&(a=new l,a._nodes=a._firstNodes=[t.target],s.call(a,t))}),{...i,...r}):n.addEventListener(t,(t=>{s.call(a,t)}),{...i,...r})})),this}click(t){return this.on("click",null,t)}filter(t){let e=[];return this._apply((s=>{e.push(this._flatten(s.querySelectorAll(t)))})),this._setNodes(this._flatten(e)),this}find(t){return this.filter(t)}has(t){return this.filter(t)}closest(t){let e=[];return this._apply((s=>{e.push(this._flatten(s.closest(t)))})),this._setNodes(this._flatten(e)),this}end(){return this._nodes=this._firstNodes,this}reset(){return this.end()}first(){return this._nodes.length&&this._setNodes([this._nodes[0]]),this}last(){return this._nodes.length&&this._setNodes([this._nodes.pop()]),this}next(){}prev(){}eq(t){return this._nodes.length&&void 0!==this._nodes[t]&&this._setNodes([this._nodes[t]]),this}get(t){return this.eq(t)}parent(){let t=[];return this._apply((e=>{t.push(e.parentNode)})),this._setNodes(this._flatten(t)),this}children(){}siblings(){}each(t){return this._apply((e=>{t.call(this,e)})),this}is(t){}not(t){}hasClass(...t){let e=1;return this._apply((s=>{t.forEach((t=>{s.classList.contains(t)?e&=1:e&=0}))})),e}addClass(...t){return this._apply((e=>{t.forEach((t=>{e.classList.add(t)}))})),this}removeClass(...t){return this._apply((e=>{t.forEach((t=>{e.classList.remove(t)}))})),this}toggleClass(...t){return this._apply((e=>{t.forEach((t=>{e.classList.toggle(t)}))})),this}css(t,e){let s={};if("object"==typeof t)for(const[e,r]of Object.entries(t))s[e]=r;else{if(void 0===e)return this._returnStatic((e=>e.getAttribute(t)));s[t]=e}return this._apply((t=>{for(const[r,i]of Object.entries(s))t.style[(e=r,e.toLowerCase().replace(/[^a-z0-9]+(.)/g,((t,e)=>e.toUpperCase())))]=i;var e})),this}hide(){return this._apply((t=>{t.style.display="none"})),this}show(){return this._apply((t=>{"none"===t.style.display?t.style.display="":t.style.display="block"})),this}width(){return this._returnStatic((t=>{const e=window.getComputedStyle(t,null);return t.clientWidth-parseInt(e.getPropertyValue("padding-left"))-parseInt(e.getPropertyValue("padding-right"))}))}innerWidth(){return this._returnStatic((t=>t.clientWidth))}outerWidth(t=!1){return this._returnStatic((e=>{let s=e.offsetWidth;if(t){const t=window.getComputedStyle(e,null);s+=parseInt(t.getPropertyValue("margin-left"))+parseInt(t.getPropertyValue("margin-right"))}return s}))}fullWidth(){return this.outerWidth(!0)}height(){return this._returnStatic((t=>{const e=window.getComputedStyle(t,null);return t.clientHeight-parseInt(e.getPropertyValue("padding-top"))-parseInt(e.getPropertyValue("padding-bottom"))}))}innerHeight(){return this._returnStatic((t=>t.clientHeight))}outerHeight(t=!1){return this._returnStatic((e=>{let s=e.offsetHeight;if(t){const t=window.getComputedStyle(e,null);s+=parseInt(t.getPropertyValue("margin-top"))+parseInt(t.getPropertyValue("margin-bottom"))}return s}))}fullHeight(){return this.outerHeight(!0)}scrollTop(t){return void 0!==t?this._returnStatic((t=>t.pageYOffset)):(this._apply((e=>{e.pageYOffset=t})),this)}position(){this._returnStatic((t=>{const e=t.getBoundingClientRect();return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}))}attr(t,e){return void 0===e?this._returnStatic((e=>e.getAttribute(t))):(this._apply((s=>{s.setAttribute(t,e)})),this)}append(t){return this._apply((e=>{e.insertAdjacentHTML("beforeend",t)})),this}prepend(t){return this._apply((e=>{e.insertAdjacentHTML("afterbegin",t)})),this}before(t){return this._apply((e=>{e.insertAdjacentHTML("beforebegin",t)})),this}after(t){return this._apply((e=>{e.insertAdjacentHTML("afterend",t)})),this}html(t){return void 0===t?this._returnStatic((t=>t.innerHTML)):(this._apply((e=>{e.innerHTML=t})),this)}text(t){return void 0===t?this._returnStatic((t=>t.textContent)):(this._apply((e=>{e.textContent=t})),this)}val(t){return void 0===t?this._returnStatic((t=>t.getAttribute("value"))):(this._apply((e=>{e.setAttribute("value",t)})),this)}}const u=t=>{return"function"==typeof t?(e=t,void("loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e))):new l(t);var e},c=class extends t{name="Masonry";defaults={cols:2,selector:".masonry"};constructor(t,e){super(),"string"==typeof t?this.init(t,e):this.apply(t)}init(t,e){void 0!==e&&this.apply(e);const s=document.querySelectorAll(t);s.length&&s.forEach((t=>{const e=Array(this.opts.cols).fill(0);t.querySelectorAll(this.opts.selector).forEach(((t,s)=>{const r=s%this.cols;t.style.order=r,e[r]+=parseFloat(t.clientHeight)})),t.style.height=Math.max(...e)+"px"}))}},p=class extends t{name="Lazy";defaults={class:"lazy",class_bg:"lazy-bg",placeholder:"data:image/gif;base64,R0lGODlhAQABAAAAACw="};init(t){this.apply(t);const e=new IntersectionObserver(((t,s)=>{t.forEach((t=>{if(t.isIntersecting){let s=t.target;s.classList.contains(this.opts.class_bg)?s.style.backgroundImage=`url(${s.dataset.src})`:s.src=s.dataset.src,s.classList.remove(this.opts.class),s.classList.remove(this.opts.class_bg),e.unobserve(s)}}))}));[].slice.call(document.querySelectorAll(`.${this.opts.class}`)).forEach((t=>{e.observe(t),t.src=this.opts.placeholder}))}};(new class extends t{name="Bones";defaults={debug:!1,shortcut:"B","dom.shortcut":"$"};#s=new Map([["browser",new r],["cookie",new i],["format",new a],["event",o],["ajax",new h],["dom",u],["masonry",new c],["lazy",new p]]);constructor(t){super(),this.apply(t);for(const t of this.#s)this[t[0]]=t[1],"function"==typeof this[t[0]].enable&&this[t[0]].enable(this);return this}init(t){void 0===t&&(t=this.name),"undefined"!=typeof window&&(void 0!==this.dom&&(this[this.opts["dom.shortcut"]]=this.dom),window[t]=this,window[this.opts.shortcut]=window[t]),this.event("ready").publish()}debug(t,...e){this.opts.debug&&console.log(t,e)}}).init()})();